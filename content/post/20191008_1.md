---
title: "《残業悪夢》复盘（2）"
slug: "20190830_4"
date: 2019-10-08T22:02:32+08:00
draft: false
---

这又是一篇伪装成复盘分享文章的硬广。

<!--more-->

继续先上trailer

**墙外**  
{{< youtube px55icn-K_k >}}


**墙内**  

<div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">
  <iframe src="//player.bilibili.com/player.html?aid=65059112&cid=112923555&page=1" 
          scrolling="no" 
          border="0" 
          frameborder="no" 
          framespacing="0" 
          allowfullscreen="true" 
          style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe>
</div>


“一眼”就可以看出这是个 **“复古ASCII字符风赛博朋克平台跳跃射击游戏”** orz

剧情讲述个996到崩溃边缘的程序员，恍惚中进入梦乡（上班睡觉罪该万死），化作一个绿色的光标，并得到许诺称只要找到代码里面的4个bug就可以下班回家的故事。

本游戏将于2019年秋季发售，目标平台是steam和switch。

steam商店已经开放：

好了，说完本文最重要的硬广部分，开始和大家分享一下在制作这款游戏中的状态，坑等，算是个复盘文章。

## 开发流程

常说程序主导的游戏一定能顺利开发完成，虽然不一定好玩。  
开发整个过程还是非常顺利的，基本上分成以下几个部分  

### 1. 基础模块  
基础模块基本上包括了  
>1. 本地化  
>2. 音效
>3. 资源管理  
>4. 关卡管理  
>5. 怪物基础类  
>6. 玩家基础类  
>7. 物理相关  
> ...

其中有部分直接复用了之前所作的游戏的模块，有的则是从demo中正式化而来。  
其中物理部分碰撞则是用的unity的collider，但是移动跳跃等则完全和demo不同。  
demo中原本是直接使用了unity的物理，但是中间遇到了很多问题，有落地卡住的，移动到一半不动的，参数尝试调整过很多次，但是始终找不到best practice，所以干脆一咬牙换了一个网上风评不错的第三方库。  
虽然使用过程中也遇到一些问题，不过最后还是一一解决了。

玩家类是直接完成了，各种功能也直接做完（本身逻辑也不复杂，毕竟没有成长系统）。
怪物基础类是来回重构了几次，component的分拆方式等，最后发现如果想要速度快，那么怎么方便怎么来，而且也有over design的问题，实际应用中并没有预想的那么多复杂的情况。

这里还是再一次提醒自己：迭代迭代，不要想着一次设计完备。

### 2. UI逻辑和gameplay  
UI逻辑和boss的gameplay大多都是由Beaver和Yaoshi两位同学帮忙完成，前后反复需求修改以及代码修正也很多，不过执行力都刚刚的，也保证了进度一直在掌控之中。  
这边UI部分其实基本都是沿用了以往的经验，加上我本身是弱UI的支持者，大多以简洁为主，不过逻辑上也有一定复杂度。  
gameplay部分其实就是怪物的AI，boss部分设计自我感觉中规中矩，不过改有的都有了。

### 3. 游戏内容  
游戏内容主要就是关卡和怪物设计部分。  
关卡尽量遵循了“起承转合”的原则，制作过程就是通勤电车上拿笔和本子在那画画画，晚上下班回家再制作成prefab，然后再跑几次做做微调。周末的时候就可以多做一些。  
初看起来觉得量很大，第一版一共有6大关，72小关。但是其实闷头搬砖脑袋专注在这部分，一共也不过2个月时间就全部制作完成了。  

怪物设计也是遵循了难度递进的原则，造型嘛，就纯靠脑洞了。
最终大约20多种怪物，实际上制作不止这个数量，中间忍痛割爱了很多。

### 4. 测试  
测试部分其实分成制作和最终的统一测试。  
从完美那边养成的好习惯（现在想来完美对程序非常宽松，时间又给的足），在制作完成一关之后都会反复游玩，记录下bug，之后再行修正。  
之后完成之后的统一测试进行了几轮，但是还是感觉不够，现在想来应该有两个原因：  
1. 人手和精力问题
2. 身为程序，在制作完成之后就像射完一样缺乏多巴胺了。

如果大家之后游玩遇到bug，还多多包涵……  

开发周期从2018年10月正式开始，一直到2019年4月完工，中间还有春节假期，将近1000次的commit之后，算是达成了一个算是”完成“的里程碑，耗时5个月左右，但是后面还有之前并没有想到的大山。


## 漫长的Polish过程  
上一篇提到在美术部分后期踩了大坑就是指的这个部分。  

在第一版出来之后，内容基本上已经填写完成，然后和FantasyDR同学讨论之后，结论是游戏太平，不太有节奏感。于是开始了长达5个月的折腾时间，这已经超过了整个开发时间。  

在一番脑洞之后，可以着手的polish方向是  
### 1. 剧情
目前的996剧情和title其实都是这阶段才定下来。  
Demo的时候的剧情其实是黑客黑进去东边火箭人的电脑里面的故事，但是制作中一直偏离，干脆直接切除掉了背景，变成了一个单纯的hacker故事。第一版的title也是hacktooer……（hack+shooter）。

这个故事显得不够饱满，而这时候突然脑洞到996写代码的故事，于是不多说直接做了opening和ending。（手写的动画，汗颜。）增加了惯老板的干话邮件。（这里要感谢那些冒充技术人员的老板资本家为了剥削而说出的各种傻缺言论为本游戏提供的素材。）

为了贴合写代码的主题，平台也做了修改，显得更加程序风格，过关动画也是做成了代码提交的界面。

更有一天蹲坑的时候，脑洞出了代码之神和残業悪夢的title。

### 2. 关卡
关卡部分主要是依靠反馈在某一天下定了决心，也可以说之前一直的疑虑被试玩过同学们的意见确定了。就是前期关卡在设计的时候铺内容太慢，显得非常平淡。  
我采取的方式比较霸道，直接砍掉了2大关24个关卡，合并了剩余的关卡，这样相对紧凑些，玩家的技能如二段跳和dash都在游戏早期可以习得了。

### 3. 画面
这一部分简直全部都是血泪。  
在关卡数量少的时候，那种古早的cli风格画面看上去还可以，但是关卡一多，就太平淡了。其实这个我在早期也有考虑到，想到在每一大关使用一种风格的画风。  
但是基于我的画工，最终也只是做了几个不同的字符类型作为地形。  
最后效果也是不好，所以开始了漫长重绘。

我的手边只有一本配色指南。  

#### 1. 第一次
最开始想到的是采用不同编码配色风格，于是更改了线条的颜色，以及给每一关增加了背景图  
但是效果还是一般，主要还是黑色为主，  背景图的效果也不太好，没有风格化

#### 2. 第二次
第二次采用实心色块，之后色彩是丰富了，但是场景还是比较单调

#### 3. 第三、四、五次  
之后FantasyDR同学多用点shader，也帮忙写了很多shader，于是开始了艰难痛苦的shader研究历程。  
基本上相当于完全重做了所有的地块，也没办法做出一个特别满意的决定，最后在尝试了差不多20多种不同风格之后定下了现在的样式。

这里感觉缺乏一个专业美术是非常痛苦的事情，美术风格没有方向，完全是靠蛮力踩出来的。

CRT效果也是在这时加入的。

最终定稿之后已经来到了9月份。  


之后会和大家分享一下开发的项目流程管理的心得，毕竟我对这次项目推进还是比较满意（除了polish部分，能力有限唉），以及使用的开发工具等。

最后附上在车上绘制的关卡草图，我好想要个ipad pro哈哈


つづく……


